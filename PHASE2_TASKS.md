# Phase 2 タスク一覧（船舶修理作業報告システム）

**作成日**: 2026/01/19  
**納品予定**: 2026/02/02

---

## 📋 Phase 2 タスク詳細

### 【優先度：最高】必須機能

| No | タスク | 工数 | 詳細 | 技術スタック |
|:---|:---|:---|:---|:---|
| **1** | **データベース化（Supabase）** | 4時間 | LocalStorage → Supabase移行、複数端末で共有可能に | Supabase + React Query |
| **2** | **見積書・請求書の自動生成** | 2時間 | 作業報告+材料持出 → 見積書/請求書データ生成 | React + Calculation Logic |
| **3** | **PDF出力機能** | 1時間 | 見積書・請求書をPDF出力（印刷可能形式） | react-pdf or jsPDF |
| **4** | **過去データ一覧・検索** | 2時間 | 過去の報告書を一覧表示、顧客名・日付で検索 | Supabase Query |
| **5** | **データ編集・削除機能** | 1時間 | 作成済み報告書の修正・削除 | Supabase Update/Delete |

**Phase 2 合計工数：10時間**

---

## 🎯 FIT訪問時のヒアリング項目（必須）

### 1. 会社情報（見積書・請求書に記載）
- [ ] 会社名
- [ ] 住所
- [ ] 電話番号
- [ ] 代表者名
- [ ] 振込先銀行情報

### 2. 消費税の扱い
- [ ] 内税 or 外税？
- [ ] 消費税率：10%？（軽減税率の適用有無）
- [ ] 請求書に消費税を明記するか？

### 3. 見積書・請求書のフォーマット
- [ ] 既存のExcelテンプレートがあれば提供してもらう
- [ ] 明細の粒度（作業者別に分けるか、まとめるか）
- [ ] 押印の要否（電子印鑑の実装が必要か）
- [ ] 発行番号のルール（連番？日付ベース？）

### 4. 優先順位の確認
Phase 2のタスクで最も優先すべき機能は？
- [ ] データベース化（複数端末で共有）
- [ ] 見積書・請求書のPDF出力
- [ ] 過去データの検索・編集

### 5. その他
- [ ] スマホでの入力実績（現場での使い勝手）
- [ ] 追加してほしい機能・改善点
- [ ] Phase 1.5.1（ステップ式UI）の使用感

---

## 📊 Phase 3以降（優先度：中）

### データ分析・集計機能

| No | タスク | 工数 | 詳細 |
|:---|:---|:---|:---|
| **6** | **顧客マスタ化** | 2時間 | 顧客情報（住所、担当者、請求条件）をDB管理 |
| **7** | **CSVエクスポート** | 1時間 | Excelでの二次加工を可能に |
| **8** | **月次集計レポート** | 3時間 | 売上・工賃・粗利の月次推移を可視化 |
| **9** | **作業者別売上集計** | 2時間 | 作業者ごとの売上貢献度を可視化 |
| **10** | **材料在庫管理** | 3時間 | 在庫数の増減を記録 |

**Phase 3 合計工数：11時間**

---

## 🔧 Phase 4（優先度：低）- 必要に応じて

| No | タスク | 工数 | 詳細 |
|:---|:---|:---|:---|
| **11** | **ダークモード対応** | 1時間 | 夜間作業時の目の負担軽減 |
| **12** | **PWA化（オフライン対応）** | 2時間 | インターネット不要で動作 |
| **13** | **複数ユーザー対応（ログイン機能）** | 4時間 | 社員ごとのアカウント管理 |
| **14** | **通知機能** | 2時間 | 報告書提出期限のリマインド等 |

**Phase 4 合計工数：9時間**

---

## 💡 技術選定（Phase 2）

### データベース：Supabase
**理由**:
- 無料枠が充実（月50,000リクエスト、500MBストレージ）
- PostgreSQLベースで拡張性が高い
- リアルタイム同期機能（複数端末での同時編集）
- 認証機能も内蔵（Phase 4で活用可能）

### PDF生成：react-pdf
**理由**:
- Reactコンポーネントでレイアウトを記述できる
- 日本語フォント対応
- ブラウザでの表示・印刷に対応

### 代替案：jsPDF
- より軽量
- 細かいレイアウト調整が必要な場合に有利

---

## 📅 Phase 2 スケジュール（暫定）

| 日付 | タスク | 状況 |
|:---|:---|:---|
| 1/20（月） | FIT訪問・ヒアリング | 🔴 未実施 |
| 1/21（火）-1/22（水） | Supabaseセットアップ・DB設計 | 🔴 未着手 |
| 1/23（木）-1/24（金） | データ一覧・編集機能実装 | 🔴 未着手 |
| 1/25（土）-1/26（日） | 見積書・請求書生成ロジック | 🔴 未着手 |
| 1/27（月）-1/28（火） | PDF出力機能実装 | 🔴 未着手 |
| 1/29（水）-1/30（木） | テスト・デバッグ | 🔴 未着手 |
| 1/31（金）-2/1（土） | FITへの事前デモ・微調整 | 🔴 未着手 |
| 2/2（日） | **Phase 2 納品** | 🔴 未着手 |

---

## 🎯 成功指標（Phase 2完了時）

| 指標 | 目標 |
|:---|:---|
| **データ永続化** | Supabase経由で複数端末から同じデータにアクセス可能 |
| **PDF出力** | 見積書・請求書をPDF形式で出力可能 |
| **データ検索** | 顧客名・日付で過去の報告書を検索可能 |
| **データ編集** | 作成済み報告書の修正・削除が可能 |
| **入力時間削減** | Phase 1比で **さらに30%削減**（DB化による重複入力排除） |

---

## 📝 備考

- Phase 2の実装前に、FIT社からの詳細ヒアリングが必須。
- 見積書・請求書のフォーマットは、既存のExcelテンプレートを参考にする。
- Phase 3以降は、Phase 2の完成後に優先順位を再検討。
